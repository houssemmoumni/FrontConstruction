<div class="container">
    <button mat-button (click)="goBack()" class="back-button">
      <mat-icon>arrow_back</mat-icon> Retour
    </button>

    <mat-card *ngIf="reclamation" class="reclamation-card">
      <mat-card-header>
        <mat-card-title>Réclamation #{{reclamation.idreclamation}}</mat-card-title>
        <mat-card-subtitle>{{reclamation.dateReclamation | date}}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <h3>{{reclamation.titre}}</h3>
        <p>{{reclamation.description}}</p>
        <div [ngClass]="getStatusClass(reclamation.status)">
          {{reclamation.status}}
        </div>
      </mat-card-content>
    </mat-card>

    <h2>Réponses ({{reponses.length}})</h2>

    <div *ngIf="isLoading" class="loading">
      <mat-spinner diameter="50"></mat-spinner>
    </div>

    <mat-list *ngIf="!isLoading">
      <mat-list-item *ngFor="let reponse of reponses" class="response-item">
        <mat-icon mat-list-icon>reply</mat-icon>
        <div mat-line>{{reponse.reponse}}</div>
        <div mat-line class="response-date">{{reponse.date_reponse| date}}</div>
      </mat-list-item>

      <mat-list-item *ngIf="reponses.length === 0 && !isLoading" class="no-responses">
        <mat-icon mat-list-icon>info</mat-icon>
        <div mat-line>Aucune réponse pour cette réclamation</div>
      </mat-list-item>
    </mat-list>
  </div>
