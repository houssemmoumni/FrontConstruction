<div class="page-wraper">
    <div class="page-content bg-white">
        <div class="section-full content-inner bg-white">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2 class="page-title">{{ jobOffer.id ? 'Modifier' : 'Ajouter' }} une offre d'emploi</h2>
                        </div>

                        <div class="card shadow-sm">
                            <div class="card-body">
                                <form (ngSubmit)="onSubmit(jobOfferForm)" #jobOfferForm="ngForm">
                                    <!-- Titre -->
                                    <div class="form-group mb-4">
                                        <label class="form-label">Titre *</label>
                                        <input type="text" class="form-control"
                                               [(ngModel)]="jobOffer.title" name="title" required #title="ngModel">
                                        <div *ngIf="title.invalid && (title.dirty || title.touched || jobOfferForm.submitted)"
                                             class="text-danger mt-1">
                                            <mat-icon class="error-icon">error</mat-icon> Le titre est requis
                                        </div>
                                    </div>

                                    <!-- Description -->
                                    <div class="form-group mb-4">
                                        <label class="form-label">Description *</label>
                                        <textarea class="form-control" rows="5"
                                                  [(ngModel)]="jobOffer.description" name="description" required #description="ngModel"></textarea>
                                        <div *ngIf="description.invalid && (description.dirty || description.touched || jobOfferForm.submitted)"
                                             class="text-danger mt-1">
                                            <mat-icon class="error-icon">error</mat-icon> La description est requise
                                        </div>
                                    </div>

                                    <!-- Statut -->
                                    <div class="form-group mb-4">
                                        <label class="form-label">Statut *</label>
                                        <select class="form-control" [(ngModel)]="jobOffer.status" name="status" required>
                                            <option value="OPEN">Ouvert</option>
                                            <option value="CLOSED">Fermé</option>
                                        </select>
                                    </div>

                                    <!-- Publier (only shown when status is OPEN) -->
                                    <div class="form-group mb-4" *ngIf="jobOffer.status === 'OPEN'">
                                        <label class="form-label">Publier immédiatement</label>
                                        <select class="form-control" [(ngModel)]="jobOffer.publish" name="publish">
                                            <option [ngValue]="true">Oui</option>
                                            <option [ngValue]="false">Non</option>
                                        </select>
                                    </div>

                                    <!-- Actions -->
                                    <div class="form-actions mt-4">
                                        <button type="submit" class="btn btn-primary" [disabled]="jobOfferForm.invalid">
                                            <mat-icon>{{ jobOffer.id ? 'save' : 'add' }}</mat-icon>
                                            {{ jobOffer.id ? 'Mettre à jour' : 'Créer' }}
                                        </button>
                                        <button type="button" class="btn btn-secondary" (click)="router.navigate(['/joboffre'])">
                                            <mat-icon>cancel</mat-icon> Annuler
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
